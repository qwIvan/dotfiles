#!/bin/sh
WIDTH=$1
HEIGHT=$2
#test "$WIDTH" || WIDTH=$(xrandr | head -n 1 | cut -d ' ' -f 8)
#test "$HEIGHT" || HEIGHT=$(xrandr | head -n 1 | cut -d ' ' -f 10 | cut -d , -f 1)
test "$WIDTH" || WIDTH=3286
test "$HEIGHT" || HEIGHT=1248
PAPER_DIR=~/wallpapers
DOWN_PAPER=~/wallpaper~
RANDOM_URL="https://unsplash.it/$WIDTH/$HEIGHT/?random"
IMAGE_WIDTH=$(convert $DOWN_PAPER -print '%w' /dev/null)
IMAGE_HEIGHT=$(convert $DOWN_PAPER -print '%h' /dev/null)
feh  --bg-fill $DOWN_PAPER --no-xinerama && mv $DOWN_PAPER $PAPER_DIR/$(md5sum $DOWN_PAPER | awk '{print $1}')-"$IMAGE_WIDTH"x"$IMAGE_HEIGHT" || feh --bg-fill --randomize $PAPER_DIR/*-"$WIDTH"x"$HEIGHT" --no-xinerama
wget "$RANDOM_URL" -O $DOWN_PAPER
